name: Direct SSH (GitHub Debug)

on:
  workflow_dispatch:

jobs:
  ssh:
    runs-on: ubuntu-latest
    timeout-minutes: 360  # 6 hours max

    steps:
    - name: Install tmate
      run: |
        sudo apt-get update
        sudo apt-get install -y tmate openssh-client

    - name: Start SSH session
      run: |
        echo "ðŸ”¹ Starting SSH session..."
        # Start a tmate session
        tmate -F -v -a > tmate.log 2>&1 &

        # Wait for session to start and provide the SSH command
        sleep 5
        cat tmate.log

        echo "========================================="
        echo "ðŸ’» Copy the SSH command below to connect:"
        echo ""
        grep -Eo 'ssh .+' tmate.log | head -n 1
        echo ""
        echo "========================================="

        # Keep workflow alive for 6 hours
        sleep 21600

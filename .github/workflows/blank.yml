name: Direct SSH (GitHub Debug)

on:
  workflow_dispatch:

jobs:
  ssh:
    runs-on: ubuntu-latest
    timeout-minutes: 360  # 6 hours max

    steps:
    - name: Install tmate
      run: |
        sudo apt-get update
        sudo apt-get install -y tmate

    - name: Start SSH session
      run: |
        echo "ðŸ”¹ Starting SSH session..."
        # Launch a new tmate session
        tmate -F > tmate.log 2>&1 &
        
        # Wait a bit for tmate to initialize
        sleep 10
        
        echo "========================================="
        echo "ðŸ’» Copy the SSH command below to connect:"
        echo ""
        grep -Eo "ssh [^ ]+@[^ ]+" tmate.log | head -n 1
        echo ""
        echo "========================================="

        echo "The SSH session will stay alive for 6 hours."

        # Keep workflow alive for the full 6 hours
        sleep 21600
